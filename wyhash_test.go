package wyhash

import "testing"

var vecs = [...]uint64{
	0,
	0xbdabbabba128cc5,
	0xb8470a90d0ab0a2b,
	0x259a11848ae23f71,
	0xcd184b2174602199,
	0x2da72eb4aaa42723,
	0x1ac9347094d039e7,
	0xcdb770f9d89d1a94,
	0xe027e8d2c167b04d,
	0xb234f5bd90664971,
	0xb2ebcdc05dd117a8,
	0x29abbc565dadf018,
	0x9546f57af3bd8c42,
	0xf486c44e7e4596d5,
	0x6933f0fc94d198bb,
	0x716a57d6d15ed8ce,
	0xafb7d02611715203,
	0x1b8c21864c2d0e6d,
	0xfd850cd2e3ba2bed,
	0xbf4371296b6f3d03,
	0xfa9fecfd41eebfd4,
	0x422001c439e3e935,
	0x3f7d1a24cf1f72ff,
	0xacde179d987c9568,
	0xbcb66b4a0922c6fb,
	0x93c3f1c60f058d23,
	0x957d2b389ab6bfb2,
	0xc3bf5ffff531ca29,
	0xdb72ce5f7a713715,
	0x44e4d026511ff270,
	0x85eba3873029f035,
	0x6e7ce89398947f22,
	0x6de6baa03a8bd927,
	0x82b357276b53aa7d,
	0x8fcf31a1a712cef5,
	0x8ba46d698ec29471,
	0xef2beba8a37e6e0b,
	0x1da0a54d396a0632,
	0xc742077fa98fdd1f,
	0x7669e769c0c411b4,
	0x26fc225888f9313d,
	0xcfa9ef4523c1cef,
	0x66181abfa9bfe18,
	0x184e81ca75599a9,
	0xbd7d920d2dfc65ba,
	0xbe5cb54e267d12d,
	0xecf97b082248d35c,
	0x48586d94f118f9da,
	0xa7e40e4865d81c92,
	0x72ed5189b3ade2da,
	0x7aa691f07d7e9972,
	0x5ba69d2e41c8c697,
	0xfdfb9c337ddc2d7f,
	0xf670043023a76cc6,
	0xf411d32ca2fbe9bf,
	0x86640e1c73f4ad1b,
	0x4c3159f82c331301,
	0xc2137e3cd8bb8221,
	0x34fa9da50aee92ff,
	0x7db8affcf974c358,
	0x6d7deaac5773ddd0,
	0xf81830df43ba544,
	0x53522f295a2d582b,
	0xe70b0c2b2256f0cb,
	0x996901cc85a2b85d,
	0xb488d84b899c2b0a,
	0x2611981cdefe4509,
	0x6d240e02fd2f52ed,
	0x5726918827329dc2,
	0x31b1b89bf4fdf482,
	0xc1b311aedfbe559b,
	0x38e5e565f1fc79e9,
	0xcd5e781c0af7b930,
	0xf4ed0ab863a2f2b3,
	0xa25f7536e5132f96,
	0xb7b920402da012d7,
	0x96091e7e276352f3,
	0x7dd62619127e0bd2,
	0xa9c7fe87ca6e6cc8,
	0x2219b896a8cc2e5,
	0xb32688533b140931,
	0xdd1a17e8cacf382e,
	0xd0712d8deb452b47,
	0x315d0fa24729136c,
	0x1412056e3cdf16e9,
	0x4aafe9072e75dcd8,
	0x9f87ae9bbd59bd4,
	0xb761b8ff607a7161,
	0x9cfccd1bf7b25346,
	0xa115a75f4167e4bc,
	0x77ca763067f908bc,
	0x70c148b63480455d,
	0x8139fa8a189257c3,
	0x4a7ad2122f312c54,
	0xf1f99eae3bdf8c5a,
	0xb524ff143ab4ec2c,
	0x585d7d709c5065a8,
	0xfaced9f570d7987a,
	0x44271de993f6713f,
	0xc63c2cc959487391,
	0x3b2e3c09e577ccd6,
	0x81cb2be2ccd15675,
	0x604232a21ffc4d62,
	0x9fd110fec2b08ed2,
	0x8726717823d82465,
	0xf5c2727581730cac,
	0xe6b8c98c40e6a9f8,
	0xdd88ce60cffb576f,
	0x8e3576f25ad9f1eb,
	0x747c8acaf27e244e,
	0xcb9b63f942b0be1d,
	0x56595b87006c6c7,
	0xd4e610c35cb038e0,
	0x6890c2669267effd,
	0xb2b29d565041b53,
	0xc4baf3d54455b704,
	0x54c8e2334333399d,
	0x5f26690db6aba884,
	0x4bd06ae54908ec06,
	0x7cb2e8c575bf19b3,
	0xab7975e45c9d6209,
	0x44ddc2156011ddfa,
	0x156f64d7ece0dd82,
	0x7cb7b22d2128ded9,
	0x91faffda97fb7aaf,
	0x736b5ffcb1754ad,
	0xac64953d89d2edfb,
	0x592c16ac2f46a328,
	0x99beccfd8eff3b3e,
	0x4cb86a84541f7d55,
	0x2f61ab6cce5cd42f,
	0x58cd429649b25003,
	0x3bfbf27678bc6fb4,
	0x7fcff9f06c2b13b,
	0xbfaa3b0f9bd4355b,
	0x18b74af2bf87c164,
	0xd307d59aa9aafe8c,
	0x6bfaeb4f97a16435,
	0xfa84683274ff9c79,
	0x4ca3b8ad5b4493f4,
	0x8dd38342111a41c3,
	0xd4d38418090429e6,
	0x7552c9e333004f97,
	0x25f7fad37def155b,
	0x23d364b61ae7960e,
	0x9563afc620340e2,
	0xd20eb46cdf6dc1f1,
	0x925b801b9725f1c,
	0xe0aa80c349e8291e,
	0xf548a3db6f14e748,
	0x592934fb5249b25e,
	0x7eec822ea2b25ee3,
	0x1d38998bdd51e81d,
	0x460e9472e97f775,
	0x845ecc82aa40a5a5,
	0x97d8a28753f5364,
	0xa95f57183ef0eebc,
	0x5b2d40424bb8554,
	0xb47bb3f1f8fa8c66,
	0x849bf0e8a7e8eae4,
	0xfb5745c3f0786a44,
	0x6b215dc68d6f7bfd,
	0x5de8e4a9e9ad33a0,
	0xeb2f1b9ccf772420,
	0x8ac4956d9bf57bca,
	0x734638980c123859,
	0x9b058ece57829cea,
	0xbeef36a91a60422,
	0xeded33dd5938fc5b,
	0xed60666360ab07a0,
	0xe2593d00401eac0d,
	0x2ce290bce8fa4a7b,
	0xab87043c6617a41,
	0x10f3bd1a7d7476ef,
	0x99f590147e510445,
	0x2c4d97270c137b57,
	0xeb3ac35caab798bc,
	0xed474c4c0655a051,
	0xe64ff69535a18af8,
	0x9399d3a503065347,
	0x51a2df90a15e79a8,
	0x8044650fd966a31f,
	0x954b1de573d73586,
	0xc6c522c114b51ea,
	0xff86e418e24ff10a,
	0x152cbc234d84a117,
	0x55058877223b0a3d,
	0x2f7403df45ecd3ec,
	0x62f4df8c4e64976c,
	0x91f5f1fa3a5a6cc2,
	0xb0dcba0b9c451cc2,
	0xba6b1870fdd5dedb,
	0xebcb8f9e966d53eb,
	0xa11b248656fdd7a1,
	0x50252a1b34014d26,
	0xe1488cce4726b95c,
	0x6a3dbc0bbf56d835,
	0xf8087be12ac0ab28,
	0x5fca2bef60569a30,
	0x43aac34394aa273c,
	0xb57e5b12ecc5b90e,
	0x153e21d39694afd4,
	0x7fe5dd6475d05e0a,
	0xc9eadb2fe2845d72,
	0x875cfe5e6f300009,
	0xa16f4e823d67b06f,
	0x9ba277cdab84c4f7,
	0xbb8579a4a0a57521,
	0xe2a6ac0f9a088cc8,
	0xf23fd8d117fc05ea,
	0xb5f538152b763ae0,
	0x13aa810a2db4a3e5,
	0x1dd4e2098d4c9cd0,
	0x48677b67c160ce5c,
	0x5c428dfa30a67a99,
	0xecf154de57c9e9fd,
	0x43cb4135b065d3ca,
	0xc42862435d7324d1,
	0x4fe11895e6492f7e,
	0xf3a4a142f0a4d7b2,
	0xaebcb81bac8078f,
	0x90b8914380b511a4,
	0x2886f1c332fd8f50,
	0x7afc29e249dae36,
	0x6b16d1aedbbee030,
	0x65538a32d5e391f2,
	0x4475dcc95d7f5e73,
	0xcd1bbd1b61db146a,
	0x2a3448ca60a4dad7,
	0x3c7046f0512b4898,
	0xeee39b7a11478eba,
	0x82f27dbac494c11b,
	0xa3479469e50f407a,
	0x4dbb9875dc9bb100,
	0x4b233b03f50b4d52,
	0x274963d746ff6a2,
	0x1a1da2a1c25f1343,
	0x391e1b068474628e,
	0x3cb0582e787b03a9,
	0x9f39d77c326ff858,
	0x950a83179be17e13,
	0x4d7cc2dd75a8c28a,
	0x9b68dd40dfdb9184,
	0x857f5b10d1f91a3e,
	0xb03718aa7bdc469d,
	0x1743df1366ae9d9e,
	0x8bb0fb0b6311be0b,
	0xf905fc1bf51c8c7,
	0x1192e405056db2fd,
	0xfcc3cc2a3f6acd1f,
	0xc6efb54da3968c93,
	0x7d589c47e381464e,
	0xa798998aa6f31a7,
	0x20759cc2aa2f2d3d,
	0x8c36392f8db6c093,
	0x194ad614a6d37355,
}

func TestWyhash(t *testing.T) {
	var data []byte

	for i, want := range vecs {
		data = append(data, byte(i))
		got := Hash(data[:i], 0x0102030405060708)
		if i != 0 && got != want {
			t.Errorf("Hash(...%d)=%x, want %x", i, got, want)
		}
	}
}

var rngvecs = [...]uint64{
	0x111cb3a78f59a58e,
	0xceabd938ff4e856d,
	0x61fb51318f47d2a4,
	0x78bd03c491909760,
	0x7c003d7fb14820de,
	0x8769964729356b1f,
	0xe214284dc87f9829,
	0x29a283ebb1b295a2,
	0xf4e11accbc44be57,
	0x9a108fea1a03ac0a,
	0x18d48308dd273c7e,
	0xce6616261de32d8e,
	0xdfc7e18b21bdf63a,
	0xde0d48d5d9c81ec5,
	0x39a8a6eadeeefa1a,
	0xf119a8000e655799,
}

func TestRng(t *testing.T) {
	var r = Rng(0)
	for i, want := range rngvecs {
		got := r.Next()
		if got != want {
			t.Errorf("rng.Next()[%d]=%x, want %x", i, got, want)
		}
	}
}
